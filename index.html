<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ticket Table</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="p-4 bg-gray-100">

<div class="flex justify-between items-center mb-4">
  <h1 class="text-2xl font-bold">Ticket Table</h1>
  <button onclick="window.location.href='inserimento.html'" class="bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 flex items-center gap-2">
    <i class="fas fa-plus"></i> Nuovo Ticket
  </button>
</div>

<div class="overflow-x-auto shadow-lg rounded-lg bg-white">
  <table class="min-w-full divide-y divide-gray-200" id="ticketTable">
    <thead class="bg-gray-50">
      <tr>
        <th class="px-4 py-2 text-left text-xs font-bold text-gray-600">Nr</th>
        <th class="px-4 py-2 text-left text-xs font-bold text-gray-600">Stato</th>
        <th class="px-4 py-2 text-left text-xs font-bold text-gray-600">Tipo</th>
        <th class="px-4 py-2 text-left text-xs font-bold text-gray-600">Priorit√†</th>
        <th class="px-4 py-2 text-left text-xs font-bold text-gray-600">Data Inserimento</th>
        <th class="px-4 py-2 text-left text-xs font-bold text-gray-600">Ambito</th>
        <th class="px-4 py-2 text-left text-xs font-bold text-gray-600">Menu</th>
        <th class="px-4 py-2 text-left text-xs font-bold text-gray-600">Titolo</th>
        <th class="px-4 py-2 text-left text-xs font-bold text-gray-600">Descrizione</th>
        <th class="px-4 py-2 text-left text-xs font-bold text-gray-600">Inserito da</th>
        <th class="px-4 py-2 text-left text-xs font-bold text-gray-600">In carico a</th>
      </tr>
    </thead>
    <tbody id="ticketBody" class="divide-y divide-gray-100">
      <!-- Ticket rows loaded from JSON -->
    </tbody>
  </table>
</div>

<script>
let tickets = JSON.parse(localStorage.getItem('tickets') || '[]');

function renderTickets() {
  const tbody = document.getElementById('ticketBody');
  tbody.innerHTML = '';
  tickets.forEach(ticket => {
    const row = document.createElement('tr');
    row.className = "bg-white hover:bg-gray-50";
    row.innerHTML = `
      <td class="px-4 py-2">${ticket.nr}</td>
      <td class="px-4 py-2">${ticket.stato}</td>
      <td class="px-4 py-2">${ticket.tipo}</td>
      <td class="px-4 py-2">${ticket.priorita}</td>
      <td class="px-4 py-2">${ticket.dataInserimento}</td>
      <td class="px-4 py-2">${ticket.ambito}</td>
      <td class="px-4 py-2">${ticket.menu}</td>
      <td class="px-4 py-2">${ticket.titolo}</td>
      <td class="px-4 py-2">${ticket.descrizione}</td>
      <td class="px-4 py-2">${ticket.inseritoDa}</td>
      <td class="px-4 py-2">${ticket.inCaricoA}</td>
    `;
    tbody.appendChild(row);
  });
}

renderTickets();
</script>

</body>
</html>
